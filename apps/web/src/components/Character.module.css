.char {
  position: relative;
  width: min-content;
  max-width: 100%;
  margin-inline: auto;
  font-size: 128px;
  font-weight: 400;
  line-height: 1.2;
  text-align: center;
  white-space: pre;
  border: 3px dashed var(--mono-3);
  border-radius: var(--radius-4);
}

.char-inner {
  display: block;
  margin: 0 -100%;
  font-family: var(--font-glyph);
}

.char-measure {
  position: absolute;
  top: 0;
  left: 0;
  z-index: -1;
  width: 100%;
  height: 100%;
  pointer-events: none;
  container-name: measure;
  container-type: inline-size;
}

.measure {
  position: absolute;
  display: block;
  font-size: 10px;
  font-weight: 700;
  color: var(--mono-8);

  &::before {
    position: absolute;
    display: block;
    content: '';
    background: var(--mono-4);
  }
}

.measure-width-value {
  display: inline-block;
  padding-block-start: 0.2em;

  &::before {
    content: var(--measure-width-label);
  }
}

.measure-height-value {
  display: inline-block;
  padding-block-end: 0.2em;
}

.measure-width {
  --measure-width-basis: 128px;
  --measure-width-percent: 0.1;
  --measure-width-label: '0.1';

  top: calc(100% + var(--space-4));
  left: 50%;
  width: calc(var(--measure-width-basis) * var(--measure-width-percent));
  transform: translateX(-50%);

  &::before {
    top: 0;
    left: 0;
    width: 100%;
    height: 1px;
  }
}

.measure-height {
  top: 50%;
  left: calc(100% + var(--space-4));
  height: 128px;
  writing-mode: vertical-rl;
  transform: translateY(-64px);
  text-orientation: mixed;

  &::before {
    top: 0;
    left: 0;
    width: 1px;
    height: 100%;
  }
}

.tick {
  position: absolute;
  display: block;
  background: var(--mono-4);
}

.measure-width .tick {
  bottom: 100%;
  width: 1px;
  height: 0.4em;
}

.measure-width .tick1 {
  left: 0;
}

.measure-width .tick2 {
  right: 0;
}

.measure-height .tick {
  right: 100%;
  width: 0.4em;
  height: 1px;
}

.measure-height .tick1 {
  top: 0;
}

.measure-height .tick2 {
  bottom: 0;
}

/*
For each container query ($i in [2..20]), calculate the min width as:
  $percent: $i / 10;
  $width: (128px * $percent) - 6.4px;
*/

@container (width >= 19.2px) {
  .measure-width {
    --measure-width-percent: 0.2;
    --measure-width-label: '0.2';
  }
}

@container (width >= 32px) {
  .measure-width {
    --measure-width-percent: 0.3;
    --measure-width-label: '0.3';
  }
}

@container (width >= 44.8px) {
  .measure-width {
    --measure-width-percent: 0.4;
    --measure-width-label: '0.4';
  }
}

@container (width >= 57.6px) {
  .measure-width {
    --measure-width-percent: 0.5;
    --measure-width-label: '0.5';
  }
}

@container (width >= 70.4px) {
  .measure-width {
    --measure-width-percent: 0.6;
    --measure-width-label: '0.6';
  }
}

@container (width >= 83.2px) {
  .measure-width {
    --measure-width-percent: 0.7;
    --measure-width-label: '0.7';
  }
}

@container (width >= 96px) {
  .measure-width {
    --measure-width-percent: 0.8;
    --measure-width-label: '0.8';
  }
}

@container (width >= 108.8px) {
  .measure-width {
    --measure-width-percent: 0.9;
    --measure-width-label: '0.9';
  }
}

@container (width >= 121.6px) {
  .measure-width {
    --measure-width-percent: 1;
    --measure-width-label: '1';
  }
}

@container (width >= 134.4px) {
  .measure-width {
    --measure-width-percent: 1.1;
    --measure-width-label: '1.1';
  }
}

@container (width >= 147.2px) {
  .measure-width {
    --measure-width-percent: 1.2;
    --measure-width-label: '1.2';
  }
}

@container (width >= 160px) {
  .measure-width {
    --measure-width-percent: 1.3;
    --measure-width-label: '1.3';
  }
}

@container (width >= 172.8px) {
  .measure-width {
    --measure-width-percent: 1.4;
    --measure-width-label: '1.4';
  }
}

@container (width >= 185.6px) {
  .measure-width {
    --measure-width-percent: 1.5;
    --measure-width-label: '1.5';
  }
}

@container (width >= 198.4px) {
  .measure-width {
    --measure-width-percent: 1.6;
    --measure-width-label: '1.6';
  }
}

@container (width >= 211.2px) {
  .measure-width {
    --measure-width-percent: 1.7;
    --measure-width-label: '1.7';
  }
}

@container (width >= 224px) {
  .measure-width {
    --measure-width-percent: 1.8;
    --measure-width-label: '1.8';
  }
}

@container (width >= 236.8px) {
  .measure-width {
    --measure-width-percent: 1.9;
    --measure-width-label: '1.9';
  }
}

@container (width >= 249.6px) {
  .measure-width {
    --measure-width-percent: 2;
    --measure-width-label: '2';
  }
}
